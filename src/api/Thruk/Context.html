---
title: Context
layout: api
breadcrumb: ['api/Thruk/', 'Thruk']
---





<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#METHODS">METHODS</a>
    <ul>
      <li><a href="#new">new</a></li>
      <li><a href="#request">request</a></li>
      <li><a href="#response">response</a></li>
      <li><a href="#log">log</a></li>
      <li><a href="#audit_log">audit_log</a></li>
      <li><a href="#cluster">cluster</a></li>
      <li><a href="#detach">detach</a></li>
      <li><a href="#render">render</a></li>
      <li><a href="#render_excel">render_excel</a></li>
      <li><a href="#render_gd">render_gd</a></li>
      <li><a href="#authenticate">authenticate</a></li>
      <li><a href="#request_username">request_username</a></li>
      <li><a href="#user_exists">user_exists</a></li>
      <li><a href="#error">error</a></li>
      <li><a href="#clear_errors">clear_errors</a></li>
      <li><a href="#check_user_roles">check_user_roles</a></li>
      <li><a href="#check_permissions">check_permissions</a></li>
      <li><a href="#check_cmd_permissions">check_cmd_permissions</a></li>
      <li><a href="#cache">cache</a></li>
      <li><a href="#cookie">cookie</a></li>
      <li><a href="#cookies">cookies</a></li>
      <li><a href="#redirect_to">redirect_to</a></li>
      <li><a href="#url_with">url_with</a></li>
      <li><a href="#translate_request_path">translate_request_path</a></li>
      <li><a href="#has_route">has_route</a></li>
      <li><a href="#sub_request">sub_request</a></li>
      <li><a href="#want_json_response">want_json_response</a></li>
    </ul>
  </li>
</ul>

<h1 id="NAME">NAME</h1>

<p>Thruk::Context - Main Context Object</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<pre><code>  use Thruk::Context;</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p><code>Thruk::Context</code> Main Context Object</p>

<h1 id="METHODS">METHODS</h1>

<h2 id="new">new</h2>

<pre><code>    new()</code></pre>

<p>return new context object</p>

<h2 id="request">request</h2>

<p>return request object</p>

<h2 id="response">response</h2>

<p>return response object</p>

<h2 id="log">log</h2>

<p>return log object</p>

<h2 id="audit_log">audit_log</h2>

<p>return audit_log object</p>

<h2 id="cluster">cluster</h2>

<p>return cluster object</p>

<h2 id="detach">detach</h2>

<p>detach to other controller</p>

<h2 id="render">render</h2>

<p>detach to other controller</p>

<h2 id="render_excel">render_excel</h2>

<p>detach to excel controller</p>

<h2 id="render_gd">render_gd</h2>

<p>detach to gd controller</p>

<h2 id="authenticate">authenticate</h2>

<p>authenticate current request user</p>

<h2 id="request_username">request_username</h2>

<p>return username from env</p>

<h2 id="user_exists">user_exists</h2>

<p>return if a user exists</p>

<h2 id="error">error</h2>

<p>return/set errors</p>

<h2 id="clear_errors">clear_errors</h2>

<p>clear all errors</p>

<h2 id="check_user_roles">check_user_roles</h2>

<p>$c-&gt;check_user_roles(&lt;role&gt;)</p>

<h2 id="check_permissions">check_permissions</h2>

<p>$c-&gt;check_permissions(&lt;type&gt;, ...)</p>

<h2 id="check_cmd_permissions">check_cmd_permissions</h2>

<p>$c-&gt;check_cmd_permissions(&lt;type&gt;, ...)</p>

<h2 id="cache">cache</h2>

<p>$c-&gt;cache()</p>

<h2 id="cookie">cookie</h2>

<p>$c-&gt;cookie()</p>

<h2 id="cookies">cookies</h2>

<p>$c-&gt;cookies()</p>

<h2 id="redirect_to">redirect_to</h2>

<p>$c-&gt;redirect_to(&lt;url&gt;)</p>

<h2 id="url_with">url_with</h2>

<p>$c-&gt;url_with(&lt;data&gt;)</p>

<h2 id="translate_request_path">translate_request_path</h2>

<pre><code>    translate_request_path(&lt;path_info&gt;, $config, $env)</code></pre>

<p>translate paths, /naemon/cgi-bin to /thruk/cgi-bin/ or /&lt;omd-site/thruk/cgi-bin/... to /thruk/cgi-bin/... so later functions can use /thruk/... for everything, regardless of the deployment path.</p>

<h2 id="has_route">has_route</h2>

<p>$c-&gt;has_route(&lt;url&gt;)</p>

<h2 id="sub_request">sub_request</h2>

<p>$c-&gt;sub_request(&lt;url&gt;, [&lt;method&gt;], [&lt;postdata&gt;], [&lt;rendered&gt;])</p>

<h2 id="want_json_response">want_json_response</h2>

<p>$c-&gt;want_json_response()</p>

<p>returns true if request indicates a json response.</p>


