---
title: CookieAuth
layout: api
breadcrumb: ['api/Thruk/', 'Thruk', 'api/Thruk/Utils/', 'Utils']
---





<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#METHODS">METHODS</a>
    <ul>
      <li><a href="#external_authentication">external_authentication</a></li>
      <li><a href="#verify_basic_auth">verify_basic_auth</a></li>
      <li><a href="#get_user_agent">get_user_agent</a></li>
      <li><a href="#clean_session_files">clean_session_files</a></li>
      <li><a href="#get_netloc">get_netloc</a></li>
      <li><a href="#store_session">store_session</a></li>
      <li><a href="#retrieve_session">retrieve_session</a></li>
    </ul>
  </li>
</ul>

<h1 id="NAME">NAME</h1>

<p>Thruk::Utils::CookieAuth - Utilities Collection for Cookie Authentication</p>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>Cookie Authentication offers a nice login mask and makes it possible to logout again.</p>

<h1 id="METHODS">METHODS</h1>

<h2 id="external_authentication">external_authentication</h2>

<pre><code>    external_authentication($config, $login, $pass, $address)</code></pre>

<p>verify authentication by external login into external url</p>

<p>return:</p>

<pre><code>    sid  if login was ok
    0    if login failed
   -1    on technical problems</code></pre>

<h2 id="verify_basic_auth">verify_basic_auth</h2>

<pre><code>    verify_basic_auth($config, $basic_auth)</code></pre>

<p>verify authentication by sending request with basic auth header.</p>

<p>returns 1 if authentication was successfull returns -1 on timeout error returns 0 if unsuccessful</p>

<h2 id="get_user_agent">get_user_agent</h2>

<pre><code>    get_user_agent($config)</code></pre>

<p>returns user agent used for external requests</p>

<h2 id="clean_session_files">clean_session_files</h2>

<pre><code>    clean_session_files($c)</code></pre>

<p>clean up session files</p>

<h2 id="get_netloc">get_netloc</h2>

<pre><code>    get_netloc($url)</code></pre>

<p>return netloc used by LWP::UserAgent credentials</p>

<h2 id="store_session">store_session</h2>

<pre><code>  store_session($config, $sessionid, $data)</code></pre>

<p>store session data</p>

<h2 id="retrieve_session">retrieve_session</h2>

<pre><code>  retrieve_session(file =&gt; $sessionfile, config =&gt; $config)
  retrieve_session(id   =&gt; $sessionid,   config =&gt; $config)</code></pre>

<p>returns session data as hash</p>

<pre><code>    {
        id       =&gt; session id (if known),
        file     =&gt; session data file name,
        username =&gt; login name,
        active   =&gt; timestamp of last activity
        address  =&gt; remote address of user (optional)
        hash     =&gt; login hash from basic auth (optional)
        roles    =&gt; extra session roles (optional)
    }</code></pre>


