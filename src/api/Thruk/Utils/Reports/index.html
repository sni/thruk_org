---
title: Reports
layout: api
breadcrumb: ['api/Thruk/', 'Thruk', 'api/Thruk/Utils/', 'Utils']
---





<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#METHODS">METHODS</a>
    <ul>
      <li><a href="#get_report_list">get_report_list</a></li>
      <li><a href="#get_report">get_report</a></li>
      <li><a href="#report_show">report_show</a></li>
      <li><a href="#report_send">report_send</a></li>
      <li><a href="#report_save">report_save</a></li>
      <li><a href="#report_remove">report_remove</a></li>
      <li><a href="#generate_report">generate_report</a></li>
      <li><a href="#queue_report">queue_report</a></li>
      <li><a href="#queue_report_if_busy">queue_report_if_busy</a></li>
      <li><a href="#generate_report_background">generate_report_background</a></li>
      <li><a href="#get_report_data_from_param">get_report_data_from_param</a></li>
      <li><a href="#update_cron_file">update_cron_file</a></li>
      <li><a href="#set_running">set_running</a></li>
      <li><a href="#set_waiting">set_waiting</a></li>
      <li><a href="#clean_report_tmp_files">clean_report_tmp_files</a></li>
      <li><a href="#get_report_templates">get_report_templates</a></li>
      <li><a href="#get_report_languages">get_report_languages</a></li>
      <li><a href="#add_report_defaults">add_report_defaults</a></li>
      <li><a href="#get_running_reports_number">get_running_reports_number</a></li>
      <li><a href="#get_new_report">get_new_report</a></li>
      <li><a href="#store_report_data">store_report_data</a></li>
      <li><a href="#read_report_file">read_report_file</a></li>
      <li><a href="#normalize_required_field">normalize_required_field</a></li>
      <li><a href="#check_for_waiting_reports">check_for_waiting_reports</a></li>
      <li><a href="#apply_report_parameters">apply_report_parameters</a></li>
    </ul>
  </li>
</ul>

<h1 id="NAME">NAME</h1>

<p>Thruk::Utils::Reports - Utilities Collection for Reporting</p>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>Utilities Collection for Reporting</p>

<h1 id="METHODS">METHODS</h1>

<h2 id="get_report_list">get_report_list</h2>

<pre><code>  get_report_list($c, [$noauth], [$nr])</code></pre>

<p>return list of all reports for this user</p>

<h2 id="get_report">get_report</h2>

<pre><code>  get_report_list($c, $nr, [$noauth])</code></pre>

<p>return report for given id</p>

<h2 id="report_show">report_show</h2>

<pre><code>  report_show($c, $nr)</code></pre>

<p>generate and show the report</p>

<h2 id="report_send">report_send</h2>

<pre><code>  report_send($c, $nr, [$skip_generate, $to, $cc, $subject, $desc])</code></pre>

<p>generate and send the report</p>

<h2 id="report_save">report_save</h2>

<pre><code>  report_save($c, $nr, $data)</code></pre>

<p>save a report</p>

<h2 id="report_remove">report_remove</h2>

<pre><code>  report_remove($c, $nr)</code></pre>

<p>remove report</p>

<h2 id="generate_report">generate_report</h2>

<pre><code>  generate_report($c, $nr)</code></pre>

<p>generate a new report</p>

<h2 id="queue_report">queue_report</h2>

<pre><code>  queue_report($c, $nr, [$mail])</code></pre>

<p>queue a report for update. returns true if report got queued.</p>

<h2 id="queue_report_if_busy">queue_report_if_busy</h2>

<pre><code>  queue_report_if_busy($c, $nr, [$mail])</code></pre>

<p>Queue a report for update. Queue will only be used if all slots are busy. Returns 1 if queue is used or undef if there are free slots.</p>

<h2 id="generate_report_background">generate_report_background</h2>

<pre><code>  generate_report_background($c, $report_nr, $with_mails, $report, $force, $debug)</code></pre>

<p>start a report in the background and queue it if all slots are busy</p>

<h2 id="get_report_data_from_param">get_report_data_from_param</h2>

<pre><code>  get_report_data_from_param($params)</code></pre>

<p>return report data for given params</p>

<h2 id="update_cron_file">update_cron_file</h2>

<pre><code>  update_cron_file($c)</code></pre>

<p>update reporting cronjobs</p>

<h2 id="set_running">set_running</h2>

<pre><code>  set_running($c, $nr, [$val])

    $val can be
        * 0 to indicate the report is finished
        * pid of the report generating process</code></pre>

<p>update running state of report</p>

<h2 id="set_waiting">set_waiting</h2>

<pre><code>  set_waiting($c, $nr, $with_mails)</code></pre>

<p>set waiting status of job</p>

<h2 id="clean_report_tmp_files">clean_report_tmp_files</h2>

<pre><code>  clean_report_tmp_files($c, $nr)</code></pre>

<p>remove any tmp files from this report</p>

<h2 id="get_report_templates">get_report_templates</h2>

<pre><code>  get_report_templates($c)</code></pre>

<p>return available report templates</p>

<h2 id="get_report_languages">get_report_languages</h2>

<pre><code>  get_report_languages($c)</code></pre>

<p>return available report languages</p>

<h2 id="add_report_defaults">add_report_defaults</h2>

<pre><code>  add_report_defaults($c, [$fields], $report)</code></pre>

<p>add report defaults</p>

<h2 id="get_running_reports_number">get_running_reports_number</h2>

<pre><code>  get_running_reports_number($c)</code></pre>

<p>returns list ($running, $waiting)</p>

<h2 id="get_new_report">get_new_report</h2>

<pre><code>  get_new_report($c, [$data])</code></pre>

<p>returns default report data</p>

<h2 id="store_report_data">store_report_data</h2>

<pre><code>  store_report_data($c, $nr, $data)</code></pre>

<p>writes report to disk</p>

<h2 id="read_report_file">read_report_file</h2>

<pre><code>  read_report_file($c, $nr, [$rdata, $noauth, $simple])</code></pre>

<p>returns report</p>

<h2 id="normalize_required_field">normalize_required_field</h2>

<pre><code>  normalize_required_field($field)</code></pre>

<p>returns normalized field structure, convert old array list into hash structure</p>

<h2 id="check_for_waiting_reports">check_for_waiting_reports</h2>

<pre><code>  check_for_waiting_reports($c)</code></pre>

<p>works on next queued report</p>

<p>returns nothing</p>

<h2 id="apply_report_parameters">apply_report_parameters</h2>

<pre><code>  apply_report_parameters($c, $to, $from)</code></pre>

<p>set report parameters into target hash</p>

<p>returns target hash</p>


