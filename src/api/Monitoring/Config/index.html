---
title: Config
layout: api
breadcrumb: ['api/Monitoring/', 'Monitoring']
---




<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#methods">METHODS</a></li>
	<ul>

		<li><a href="#new">new</a></li>
		<li><a href="#init">init</a></li>
		<li><a href="#discard_changes">discard_changes</a></li>
		<li><a href="#commit">commit</a></li>
		<li><a href="#get_files">get_files</a></li>
		<li><a href="#get_file_by_path">get_file_by_path</a></li>
		<li><a href="#get_changed_files">get_changed_files</a></li>
		<li><a href="#get_objects">get_objects</a></li>
		<li><a href="#get_objects_by_type">get_objects_by_type</a></li>
		<li><a href="#get_objects_by_name">get_objects_by_name</a></li>
		<li><a href="#get_templates_by_type">get_templates_by_type</a></li>
		<li><a href="#get_template_by_name">get_template_by_name</a></li>
		<li><a href="#get_object_by_location">get_object_by_location</a></li>
		<li><a href="#get_object_by_id">get_object_by_id</a></li>
		<li><a href="#get_services_for_host">get_services_for_host</a></li>
		<li><a href="#update">update</a></li>
		<li><a href="#check_files_changed">check_files_changed</a></li>
		<li><a href="#update_object">update_object</a></li>
		<li><a href="#delete_object">delete_object</a></li>
		<li><a href="#move_object">move_object</a></li>
		<li><a href="#file_add">file_add</a></li>
		<li><a href="#file_delete">file_delete</a></li>
		<li><a href="#file_undelete">file_undelete</a></li>
		<li><a href="#rebuild_index">rebuild_index</a></li>
		<li><a href="#rename_dependencies">rename_dependencies</a></li>
		<li><a href="#get_references">get_references</a></li>
		<li><a href="#get_default_keys">get_default_keys</a></li>
		<li><a href="#get_files_for_folder">get_files_for_folder</a></li>
		<li><a href="#get_files_root">get_files_root</a></li>
		<li><a href="#is_host_in_hostgroup">is_host_in_hostgroup</a></li>
		<li><a href="#is_remote">is_remote</a></li>
		<li><a href="#remote_file_sync">remote_file_sync</a></li>
		<li><a href="#remote_config_check">remote_config_check</a></li>
		<li><a href="#remote_config_reload">remote_config_reload</a></li>
		<li><a href="#remote_file_save">remote_file_save</a></li>
		<li><a href="#remote_get_plugins">remote_get_plugins</a></li>
		<li><a href="#remote_get_pluginhelp">remote_get_pluginhelp</a></li>
		<li><a href="#remote_get_pluginpreview">remote_get_pluginpreview</a></li>
		<li><a href="#read_rc_file">read_rc_file</a></li>
		<li><a href="#set_save_config">set_save_config</a></li>
		<li><a href="#_sort_by_object_keys">_sort_by_object_keys</a></li>
		<li><a href="#get_plugins">get_plugins</a></li>
		<li><a href="#get_plugin_help">get_plugin_help</a></li>
		<li><a href="#get_plugin_preview">get_plugin_preview</a></li>
	</ul>

	<li><a href="#author">AUTHOR</a></li>
	<li><a href="#license">LICENSE</a></li>
</ul>

<hr name="index" />
</div>
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>Monitoring::Config - Thruks Object Database</p>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>Provides access to core objects like hosts, services etc...</p>
<p>
</p>
<hr />
<h1><a name="methods">METHODS</a></h1>
<p>
</p>
<h2><a name="new">new</a></h2>
<pre>
    new({
        core_conf           =&gt; path to core config
        obj_file            =&gt; path to core config file
        obj_dir             =&gt; path to core config path
        obj_resource_file   =&gt; path to resource.cfg file
        obj_readonly        =&gt; readonly pattern
        obj_exclude         =&gt; exclude pattern
        git_base_dir        =&gt; git history base folder
        localdir            =&gt; local path used for remote configs
        relative            =&gt; allow relative paths
    })</pre>
<p>return new objects database</p>
<p>
</p>
<h2><a name="init">init</a></h2>
<pre>
    init($config, [ $stats ])</pre>
<p>initialize configs</p>
<p>
</p>
<h2><a name="discard_changes">discard_changes</a></h2>
<pre>
    discard_changes()</pre>
<p>Forget all changes made so far and not yet saved to disk</p>
<p>
</p>
<h2><a name="commit">commit</a></h2>
<pre>
    commit([$c])</pre>
<p>Commit changes to disk. Returns 1 on success.</p>
<p>$c is only needed when syncing with remote sites.</p>
<p>
</p>
<h2><a name="get_files">get_files</a></h2>
<pre>
    get_files()</pre>
<p>Get all files. Returns list of <a href="/api/Monitoring/Config/File.html">Monitoring::Config::File</a> objects.</p>
<p>
</p>
<h2><a name="get_file_by_path">get_file_by_path</a></h2>
<pre>
    get_file_by_path($path)</pre>
<p>Get file by path. Returns <a href="/api/Monitoring/Config/File.html">Monitoring::Config::File</a> object or undef.</p>
<p>
</p>
<h2><a name="get_changed_files">get_changed_files</a></h2>
<pre>
    get_changed_files()</pre>
<p>Get all changed files. Returns list of <a href="/api/Monitoring/Config/File.html">Monitoring::Config::File</a> objects.</p>
<p>
</p>
<h2><a name="get_objects">get_objects</a></h2>
<pre>
    $list = get_objects()</pre>
<p>Get all objects. Returns list of <a href="/api/Monitoring/Config/Object.html">Monitoring::Config::Object</a> objects.</p>
<p>
</p>
<h2><a name="get_objects_by_type">get_objects_by_type</a></h2>
<pre>
    $list = get_objects_by_type($type, [ $filter ], [ $origin])</pre>
<p>Returns list of <a href="/api/Monitoring/Config/Object.html">Monitoring::Config::Object</a> objects for a type.</p>
<p>filter is verified against the name if its a scalar value. Otherwise it has to be like</p>
<pre>
 $filter = {
    attribute =&gt; value
 };</pre>
<pre>
 origin is used for commands and can be 'check', 'eventhandler' or 'notification'</pre>
<p>
</p>
<h2><a name="get_objects_by_name">get_objects_by_name</a></h2>
<pre>
    get_objects_by_name($type, $name, [ $templates_only , [ $name2 ]])</pre>
<p>Get objects by name. Returns list of <a href="/api/Monitoring/Config/Object.html">Monitoring::Config::Object</a> objects.</p>
<p>
</p>
<h2><a name="get_templates_by_type">get_templates_by_type</a></h2>
<pre>
    get_templates_by_type($type)</pre>
<p>Get templates by type. Returns list of <a href="/api/Monitoring/Config/Object.html">Monitoring::Config::Object</a> objects.</p>
<p>
</p>
<h2><a name="get_template_by_name">get_template_by_name</a></h2>
<pre>
    get_template_by_name($type, $name)</pre>
<p>Get template object by name. Returns list of <a href="/api/Monitoring/Config/Object.html">Monitoring::Config::Object</a> objects.</p>
<p>
</p>
<h2><a name="get_object_by_location">get_object_by_location</a></h2>
<pre>
    get_object_by_location($path, $linenr)</pre>
<p>Get object by location. Returns <a href="/api/Monitoring/Config/Object.html">Monitoring::Config::Object</a> objects or undef.</p>
<p>
</p>
<h2><a name="get_object_by_id">get_object_by_id</a></h2>
<pre>
    get_object_by_id($id)</pre>
<p>Get object by id. Returns <a href="/api/Monitoring/Config/Object.html">Monitoring::Config::Object</a> object or undef.</p>
<p>
</p>
<h2><a name="get_services_for_host">get_services_for_host</a></h2>
<pre>
    get_services_for_host($hostobj)</pre>
<p>Get services by host. Returns a hashref with ids of references:</p>
<pre>
 { host =&gt; {}, group =&gt; {} }</pre>
<p>
</p>
<h2><a name="update">update</a></h2>
<pre>
    update()</pre>
<p>update objects config</p>
<p>
</p>
<h2><a name="check_files_changed">check_files_changed</a></h2>
<pre>
    check_files_changed([ $reload ])</pre>
<p>update objects config</p>
<p>
</p>
<h2><a name="update_object">update_object</a></h2>
<pre>
    update_object($obj, $newdata, [ $comments, [ $rebuild ]])</pre>
<p>update objects config</p>
<p>
</p>
<h2><a name="delete_object">delete_object</a></h2>
<pre>
    delete_object($obj, [ $rebuild ])</pre>
<p>update objects config</p>
<p>
</p>
<h2><a name="move_object">move_object</a></h2>
<pre>
    move_object($obj, $newfile, [ $rebuild ])</pre>
<p>move object to different file</p>
<p>
</p>
<h2><a name="file_add">file_add</a></h2>
<pre>
    file_add($file, [ $rebuild ])</pre>
<p>add new file to config</p>
<p>
</p>
<h2><a name="file_delete">file_delete</a></h2>
<pre>
    file_delete($file, [ $rebuild ])</pre>
<p>remove a file from the config</p>
<p>
</p>
<h2><a name="file_undelete">file_undelete</a></h2>
<pre>
    file_undelete($file, [ $rebuild ])</pre>
<p>undelete a file marked for removal</p>
<p>
</p>
<h2><a name="rebuild_index">rebuild_index</a></h2>
<pre>
    rebuild_index()</pre>
<p>rebuild object index</p>
<p>
</p>
<h2><a name="rename_dependencies">rename_dependencies</a></h2>
<pre>
    rename_dependencies($obj, $oldname, $newname)</pre>
<p>rename dependencies</p>
<p>
</p>
<h2><a name="get_references">get_references</a></h2>
<pre>
    get_references($obj, [ $name ])</pre>
<p>return all references for this object</p>
<p>
</p>
<h2><a name="get_default_keys">get_default_keys</a></h2>
<pre>
    get_default_keys($type, [ $options ])</pre>
<pre>
 $options = {
     no_alias =&gt; 0,   # skip alias definitions and only return real config attributes
     sort     =&gt; 0,   # sort by default attribute order
 }</pre>
<p>return the default config keys for a type of object</p>
<p>
</p>
<h2><a name="get_files_for_folder">get_files_for_folder</a></h2>
<pre>
    get_files_for_folder($dir, [ $regex ])</pre>
<p>return all files below this folder (matching the regex)</p>
<p>
</p>
<h2><a name="get_files_root">get_files_root</a></h2>
<pre>
    get_files_root()</pre>
<p>return root folder for config files</p>
<p>
</p>
<h2><a name="is_host_in_hostgroup">is_host_in_hostgroup</a></h2>
<pre>
    is_host_in_hostgroup()</pre>
<p>return list of hostgroups if this host is member of the group</p>
<p>
</p>
<h2><a name="is_remote">is_remote</a></h2>
<pre>
    is_remote()</pre>
<p>return true if this backend has a remote connection</p>
<p>
</p>
<h2><a name="remote_file_sync">remote_file_sync</a></h2>
<pre>
    remote_file_sync()</pre>
<p>syncronize files from remote</p>
<p>
</p>
<h2><a name="remote_config_check">remote_config_check</a></h2>
<pre>
    remote_config_check()</pre>
<p>do config check on remote site</p>
<p>
</p>
<h2><a name="remote_config_reload">remote_config_reload</a></h2>
<pre>
    remote_config_reload()</pre>
<p>do a config reload on remote site</p>
<p>
</p>
<h2><a name="remote_file_save">remote_file_save</a></h2>
<pre>
    remote_file_save()</pre>
<p>save files to remote site</p>
<p>
</p>
<h2><a name="remote_get_plugins">remote_get_plugins</a></h2>
<pre>
    remote_get_plugins()</pre>
<p>return plugins from remote site</p>
<p>
</p>
<h2><a name="remote_get_pluginhelp">remote_get_pluginhelp</a></h2>
<pre>
    remote_get_pluginhelp()</pre>
<p>return plugin help from remote site</p>
<p>
</p>
<h2><a name="remote_get_pluginpreview">remote_get_pluginpreview</a></h2>
<pre>
    remote_get_pluginpreview()</pre>
<p>return plugin preview from remote site</p>
<p>
</p>
<h2><a name="read_rc_file">read_rc_file</a></h2>
<pre>
    read_rc_file()</pre>
<p>read naglint rc file and create sort function</p>
<p>
</p>
<h2><a name="set_save_config">set_save_config</a></h2>
<p>updates file save config</p>
<p>
</p>
<h2><a name="_sort_by_object_keys">_sort_by_object_keys</a></h2>
<p>sort function for object keys</p>
<p>
</p>
<h2><a name="get_plugins">get_plugins</a></h2>
<p>return list of plugins</p>
<p>
</p>
<h2><a name="get_plugin_help">get_plugin_help</a></h2>
<p>return plugin help</p>
<p>
</p>
<h2><a name="get_plugin_preview">get_plugin_preview</a></h2>
<p>return plugin preview</p>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>Sven Nierlein, 2009-2014, &lt;<a href="mailto:sven@nierlein.org">sven@nierlein.org</a>&gt;</p>
<p>
</p>
<hr />
<h1><a name="license">LICENSE</a></h1>
<p>This library is free software, you can redistribute it and/or modify
it under the same terms as Perl itself.</p>

